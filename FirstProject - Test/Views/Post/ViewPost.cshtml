@using FirstProjectRepository.UsefullModels
@using FirstProject___Test.Helpful
@model PostWithUsername

<h2>@Model.title</h2>
<p>by @Model.username @TimeHelper.TimeAgo(@Model.createdAt) @Model.number_of_comments comments</p>
<p>@Model.text</p>
@if (!string.IsNullOrEmpty(Model.url))
{
    <p>Link: <a href="@Model.url" target="_blank">@Model.url</a></p>
}

<h3>Add Comment</h3>
<form method="post" asp-action="AddComment" asp-controller="Comment" asp-route-postId="@Model.postId">
    <textarea name="commentText" rows="4" cols="50" required></textarea>
    <br />
    <button type="submit">Add Comment</button>
</form>

<h3>Comments</h3>
@if (Model.comments == null || !Model.comments.Any())
{
    <p>No comments found.</p>
}
else
{
    <ul>
        @foreach (var comment in Model.comments)
        {
            @await Html.PartialAsync("_Replies", comment)
        }
    </ul>
}
}
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
